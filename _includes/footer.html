<!-- Contact -->
<section id="contact">
	<div class="inner">
		<section>
			
			
		<script>
			document.getElementById('contact-form').addEventListener('submit', function(event) {
			    event.preventDefault();  // Prevent default form submission

			    // Clear previous error message
			    document.getElementById('error-message').style.display = 'none';
			    document.getElementById('error-message').innerText = '';

			    // Validate form fields
			    const form = event.target;
			    let valid = true;

			    // Check if fields are empty
			    if (!form.name.value || !form._replyto.value || !form.message.value) {
			        valid = false;
			        document.getElementById('error-message').innerText = 'Please fill in all fields.';
			    }

			    if (valid) {
			        // Submit form using AJAX (Formspree handles it asynchronously)
			        fetch(form.action, {
			            method: 'POST',
			            body: new FormData(form)
			        })
			        .then(response => {
			            // Log the response for debugging
			            console.log('Response Status:', response.status);
			            return response.json(); // Attempt to parse the response as JSON
			        })
			        .then(data => {
			            console.log('Response Data:', data); // Log the response data for debugging

			            // If form is successfully submitted
			            if (data && data.ok) {
			                alert('Thank you for your message!');
			                form.reset();  // Clear form fields
			            } else {
			                // Display error message from response (if available)
			                document.getElementById('error-message').innerText = 'Oops! Something went wrong. Please try again.';
			                document.getElementById('error-message').style.display = 'block';
			            }
			        })
			        .catch(error => {
			            // Handle network errors or unexpected issues
			            console.error('Error:', error); // Log the error for debugging
			            document.getElementById('error-message').innerText = 'Thanks!';
			            document.getElementById('error-message').style.display = 'block';
			        });
			    } else {
			        // Show client-side validation error
			        document.getElementById('error-message').style.display = 'block';
			    }
			});
		
		</script>
		
			
			<!-- modify this form HTML and place wherever you want your form -->


				<div class="contact-method">
					<span class="icon alt fa-envelope"></span>
					<h3>Message Me</h3>
			
					<p>Always happy to provide a free session and discuss your needs!</p>
					
				
<form
  action="https://formspree.io/f/mwpvbdbr"
  method="POST"
  id="contact-form"
>
    <div class="field half first">
        <label for="name">Name</label>
        <input type="text" name="name" id="name" required />
    </div>
    <div class="field half">
        <label for="email">Email</label>
        <input type="email" name="email" id="email" required />
    </div>
    <div class="field">
        <label for="message">Message</label>
        <textarea name="message" id="message" rows="6" required></textarea>
    </div>
    <button type="submit">Send</button>
    <div id="error-message" style="display:none; color:red;"></div>
</form>

<div id="thank-you-message" style="display:none; color:green;">
  Thank you for your submission!
</div>
<script>
  const form = document.getElementById('contact-form');
  const thankYouMessage = document.getElementById('thank-you-message');
  const errorMessage = document.getElementById('error-message');

  form.addEventListener('submit', function (event) {
    event.preventDefault();  // Prevent the form from submitting the traditional way
    
    const formData = new FormData(form);
    
    // Send data to Formspree using Fetch API
    fetch(form.action, {
      method: form.method,
      body: formData
    })
    .then(response => {
      console.log('Response Status:', response.status);  // Log the response status
      if (response.ok) {
        // Show thank you message and hide the form
        thankYouMessage.style.display = 'block';
        form.style.display = 'none';
      } else {
        // Show error message if there's an issue
        errorMessage.style.display = 'block';
        errorMessage.textContent = 'Oops, there was an error. Please try again.';
      }
    })
    .catch(error => {
      // Log the error and show an error message if network error occurs
      console.error('Network Error:', error);
      errorMessage.style.display = 'block';
      errorMessage.textContent = 'Network error. Please try again later.';
    });
  });
</script>

</div>

	
		</section>
		<section class="split">
			<!--<section>
				<div class="contact-method">
					<span class="icon alt fa-envelope"></span>
					<h3>Email</h3>
					<a href="mailto:{{ site.email }}">{{ site.email }}</a>
				</div>
			</section>-->
			<section>
				<div class="contact-method">
					<span class="icon alt fa-linkedin"></span>
					<h3>Linkedin</h3>
					<a href="http://linkedin.com/in/diesh" target="_blank">Gagan Diesh on Linkedin</a>
				</div>
			</section>
			<section>
				<div class="contact-method">
					<span class="icon alt fa-paper-plane"></span>
					<h3>Newsletter</h3>
					<P>Once a month, no fluff</p><br />
				<iframe src="https://diesh.substack.com/embed" width="480" height="150" style="border:0; margin-left: -30px; margin-top:-40px;" frameborder="0" scrolling="no"></iframe>
				
					
				</div>
				
			</section>
		</section>
	</div>
</section>

<!-- Footer -->
	<footer id="footer">
		<div class="inner">
			<!--
				<ul class="icons">
				{% for key_value in site.socials %}
					{% if key_value[1] %}
						<li>
							<a href="{{ key_value[1] }}" class="icon alt fa-{{ key_value[0] | downcase }}" target="_blank" rel="noopener noreferrer" aria-label="{{ key_value[0] }}">
								<span class="label">{{ key_value[0] }}</span>
							</a>
						</li>
					{% endif %}
				{% endfor %}
			</ul>
				-->
			
			<ul class="copyright">
				<li>&copy;<span id="current-year"></span> <a href="http://designstamp.com/?GaganDieshCoaching" target="_blank">DesignStamp</a> | Coaching by {{ site.title }}</li>
			<li><a href="https://diesh.substack.com/" target="_blank">Signup for my newsletter</a></li>
			
				<li><br /></li>
				<li><a href="https://designstamp.com/privacy" target="_blank">Privacy policy</a></li>
				<li>I use a mix of Canadian and American spelling. I know. ü§∑üèΩ‚Äç‚ôÇÔ∏è</li>
				<li>Short on $ and out of work? If you need help, <a href="#contact" class="next scrolly">message me</a>. We can figure this out.

			</ul>
			<br />
			<br />
			<br />
			<br /><br />
		
			<script>
			  // Wait until the DOM content is fully loaded before running the script
			  document.addEventListener('DOMContentLoaded', function() {
			    document.getElementById('current-year').textContent = new Date().getFullYear();
			  });
			</script>
			
		</div>
	</footer>

</div>

<!-- Scripts -->
	<script src="{{ "assets/js/jquery.min.js" | absolute_url }}"></script>
	<script src="{{ "assets/js/jquery.scrolly.min.js" | absolute_url }}"></script>
	<script src="{{ "assets/js/jquery.scrollex.min.js" | absolute_url }}"></script>
	<script src="{{ "assets/js/skel.min.js" | absolute_url }}"></script>
	<script src="{{ "assets/js/util.js" | absolute_url }}"></script>
	<!--[if lte IE 8]><script src="{{ "assets/js/ie/respond.min.js" | absolute_url }}"></script><![endif]-->
	<script src="{{ "assets/js/main.js" | absolute_url }}"></script>
