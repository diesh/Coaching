<!-- Contact -->
<section id="contact">
  <div class="inner">
    <section>
      <!-- Contact form -->
      <div class="contact-method">
        <span class="icon alt fa-envelope"></span>
        <h3>Message Me</h3>
        <p>Always happy to provide a free session and discuss your needs!</p>

        <form action="https://formspree.io/f/mwpvbdbr" method="POST" id="contact-form">
          <div class="field half first">
            <label for="name">Name</label>
            <input type="text" name="name" id="name" required />
          </div>
          <div class="field half">
            <label for="email">Email</label>
            <input type="email" name="email" id="email" required />
          </div>
          <div class="field">
            <label for="message">Message</label>
            <textarea name="message" id="message" rows="6" required></textarea>
          </div>
          <button type="submit">Send</button>

          <!-- Apply the speechbubble class here -->
          <div id="error-message" class="speechbubble" style="display:none;"></div>
          <div id="thank-you-message" class="speechbubble" style="display:none;">Thanks for your message! I look forward to connecting!</div>
        </form>

        <script>
          const form = document.getElementById('contact-form');
          const thankYouMessage = document.getElementById('thank-you-message');
          const errorMessage = document.getElementById('error-message');

          form.addEventListener('submit', function (event) {
            event.preventDefault();  // Prevent the form from submitting traditionally

            const formData = new FormData(form);
            console.log("Form data submitted:", formData);  // Log form data

            fetch(form.action, {
              method: form.method,
              body: formData,
              headers: { 'Accept': 'application/json' }  // Expecting JSON response from Formspree
            })
            .then(response => {
              console.log('Response Status:', response.status);  // Log response status
              return response.json();  // Attempt to parse the JSON response
            })
            .then(data => {
              console.log("Form submission response data:", data);  // Log the response data

              if (data.ok) {
                // If submission is successful, show the thank-you message
                thankYouMessage.style.display = 'block';  // Show success message
                console.log("Form submission successful.");
              } else {
                // If the response is not OK, show error message
                errorMessage.style.display = 'block';
                errorMessage.textContent = 'Oops, there was an error. Please try again.';
                console.log("Form submission failed.");
              }
            })
            .catch(error => {
              // Log any network or other errors
              console.error('Network Error:', error);
              errorMessage.style.display = 'block';
              errorMessage.textContent = 'Network error. Please try again later.';
            });
          });
        </script>

      </div>
    </section>

    <section class="split">
      <section>
        <div class="contact-method">
          <span class="icon alt fa-linkedin"></span>
          <h3>Linkedin</h3>
          <a href="http://linkedin.com/in/diesh" target="_blank">Gagan Diesh on Linkedin</a>
        </div>
      </section>

      <section>
        <div class="contact-method">
          <span class="icon alt fa-paper-plane"></span>
          <h3>Newsletter</h3>
          <p>Once a month, no fluff</p><br />
          <iframe src="https://diesh.substack.com/embed" width="480" height="150" style="border:0; margin-left: -30px; margin-top:-40px;" frameborder="0" scrolling="no"></iframe>
        </div>
      </section>
    </section>
  </div>
</section>

<!-- Footer -->
<footer id="footer">
  <div class="inner">
	 
	  	<p class="breadcrumb">
	          {% assign sorted_pages = site.html_pages | where: "nav-menu", true | sort: "weight" %}

	          {% for page in sorted_pages %}
	              
	                  <a href="{{ page.url | absolute_url }}">
	                      {{ page.title }}
	                  </a> <br />
	              
	          {% endfor %}
</p>
	      
	         

	
	  <br />
    <ul class="copyright">
      <li>&copy;<span id="current-year"></span> <a href="http://designstamp.com/?GaganDieshCoaching" target="_blank">DesignStamp</a> | Coaching by {{ site.title }}</li>
      <li><a href="https://diesh.substack.com/" target="_blank">Signup for my newsletter</a></li>
      <li><br /></li>
      <li><a href="https://designstamp.com/privacy" target="_blank">Privacy policy</a></li>
      <li>I use a mix of Canadian and American spelling. I realize this is my favourite mistakeü§∑üèΩ‚Äç‚ôÇÔ∏è.</li>
      <li>Short on $ and out of work? If you need help, <a href="#contact" class="next scrolly">message me</a>. We can figure this out.</li>
    </ul>

    <script>
      // Wait until the DOM content is fully loaded before running the script
      document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('current-year').textContent = new Date().getFullYear();
      });
    </script>
  </div>
</footer>

<!-- Scripts -->
<script src="{{ 'assets/js/jquery.min.js' | absolute_url }}"></script>
<script src="{{ 'assets/js/jquery.scrolly.min.js' | absolute_url }}"></script>
<script src="{{ 'assets/js/jquery.scrollex.min.js' | absolute_url }}"></script>
<script src="{{ 'assets/js/skel.min.js' | absolute_url }}"></script>
<script src="{{ 'assets/js/util.js' | absolute_url }}"></script>
<!--[if lte IE 8]><script src="{{ 'assets/js/ie/respond.min.js' | absolute_url }}"></script><![endif]-->
<script src="{{ 'assets/js/main.js' | absolute_url }}"></script>
