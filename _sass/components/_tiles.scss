/* Default behavior: background image and color wash */
.tiles {
  @include vendor('display', 'flex');
  @include vendor('flex-wrap', 'wrap');
  border-top: 0 !important;

  & + * {
    border-top: 0 !important;
  }

  article {
    @include vendor('align-items', 'center');
    @include vendor('display', 'flex');
    @include vendor('transition', (
      'transform 0.25s ease',
      'opacity 0.25s ease',
      'filter 1s ease',
      '-webkit-filter 1s ease'
    ));
    @include padding(4em, 4em);
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    cursor: default;
    height: 40vh;
    max-height: 40em;
    min-height: 23em;
    overflow: hidden;
    position: relative;
    width: 40%;

    /* Hide image tag on larger screens */
    .image {
      display: none;
    }

    header {
      position: relative;
      z-index: 3;
    }

    h3 {
      font-size: 1.75em;

      a {
        &:hover {
          color: inherit !important;
        }
      }
    }

    .link.primary {
      border: 0;
      height: 100%;
      left: 0;
      position: absolute;
      top: 0;
      width: 100%;
      z-index: 4;
    }

    &:before {
      @include vendor('transition', 'opacity 0.5s ease');
      bottom: 0;
      content: '';
      display: block;
      height: 100%;
      left: 0;
      opacity: 0.65;
      position: absolute;
      width: 100%;
      z-index: 2;
      filter: saturate(80%);
    }

    &:after {
      background-color: transparentize(_palette(bg), 0.75);
      content: '';
      display: block;
      height: 100%;
      left: 0;
      position: absolute;
      top: 0;
      width: 100%;
      z-index: 1;
    }

    &:hover {
      &:before {
        opacity: 0;
      }
    }

    &.is-transitioning {
      @include vendor('transform', 'scale(0.95)');
      @include vendor('filter', 'blur(0.5em)');
      opacity: 0;
    }
  }
}

/* For larger screens (large, medium, etc.), background image remains */
@include breakpoint(large) {
  .tiles {
    article {
      background-image: url("{{ tile.image }}");  /* Show background image */
      background-size: cover;
      background-position: center;
    }
  }
}

/* For mobile screens, remove background image and keep color wash */
@include breakpoint(small) {
  .tiles {
    article {
      background-image: none !important;  /* Remove background image on mobile */
      background-color: transparentize(_palette(bg), 0.75);  /* Keep color wash */
    }

    /* Optional: Show image inside article (if desired for mobile) */
    article .image {
      display: block;
    }
  }
}

@include breakpoint(xsmall) {
  .tiles {
    article {
      background-image: none !important;  /* Remove background image on smaller screens */
      background-color: transparentize(_palette(bg), 0.75);  /* Keep color wash */
    }
  }
}
